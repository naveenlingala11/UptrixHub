<section class="game-container">

  <!-- ğŸ® GAME PANEL -->
  <div class="game-panel" [ngClass]="panelThemeClass">

    <!-- TITLE -->
    <div class="title">
      <span class="x">âŒ</span>
      <h1>Tic Tac Toe</h1>
      <span class="o">â­•</span>
    </div>

    <!-- MODE + CONTROLS -->
    <div class="controls">
      <select [(ngModel)]="mode">
        <option value="BOT">ğŸ¤– Vs Bot</option>
        <option value="PVP">ğŸ‘¥ Player vs Player</option>
        <option value="ONLINE">ğŸŒ Online</option>
      </select>

      <input
        *ngIf="mode === 'ONLINE'"
        [(ngModel)]="roomId"
        placeholder="Room ID"
      />

      <button *ngIf="mode === 'ONLINE'" (click)="startOnline()">ğŸ”— Join</button>

      <select *ngIf="mode === 'BOT'" [(ngModel)]="difficulty">
        <option value="EASY">ğŸ™‚ Easy</option>
        <option value="HARD">ğŸ¤– Hard</option>
      </select>

      <button *ngIf="mode !== 'ONLINE'" (click)="showHint()">ğŸ’¡ Hint</button>
    </div>

    <!-- ONLINE MATCH -->
    <div class="controls" *ngIf="mode === 'ONLINE'">
      <button (click)="startRandomMatch()" [disabled]="matchStatus === 'WAITING'">
        ğŸ¯ Play Online
      </button>

      <span *ngIf="matchStatus === 'WAITING'">
        â³ Finding opponent...
      </span>
    </div>

    <!-- THEME + SOUND -->
    <div class="controls">
      <select [(ngModel)]="selectedTheme" (change)="applyTheme(selectedTheme)">
        <option *ngFor="let t of themes" [value]="t.id">
          {{ t.label }}
        </option>
      </select>

      <button class="sound-toggle" (click)="toggleSound()">
        {{ soundEnabled ? 'ğŸ”Š Sound On' : 'ğŸ”‡ Sound Off' }}
      </button>
    </div>

    <!-- STATUS -->
    <p *ngIf="!winner">
      Turn: <strong>{{ currentPlayer }}</strong>
    </p>

    <h2 *ngIf="winner && winner !== 'DRAW'">
      ğŸ‰ {{ winner }} Wins
    </h2>
    <h2 *ngIf="winner === 'DRAW'">ğŸ¤ Draw</h2>

    <!-- BOARD -->
    <div class="board">
      <div
        class="cell"
        *ngFor="let c of board; let i = index"
        [class.win]="winningLine?.includes(i)"
        [class.hint]="i === hintIndex"
        (click)="mode === 'ONLINE' ? playOnline(i) : play(i)"
      >
        {{ c }}
      </div>
    </div>

    <button class="reset" (click)="reset()">ğŸ” Restart</button>

  </div>
</section>
